<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Publishing your add-on - Home Assistant 中文网</title>
    <meta name="author" content="Home Assistant China">
    <meta name="description" content="Steps on how-to create an add-on for Hass.io.">
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://home-assistant-china.github.io/hassio/addon_publishing/">
    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Publishing your add-on">
    <meta property="og:site_name" content="Home Assistant 中文网">
    <meta property="og:url" content="https://home-assistant-china.github.io/hassio/addon_publishing/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Steps on how-to create an add-on for Hass.io.">
    <meta property="og:image" content="https://home-assistant.io/images/default-social.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    <meta name="twitter:title" content="Publishing your add-on">
    <meta name="twitter:description" content="Steps on how-to create an add-on for Hass.io.">
    <meta name="twitter:image" content="https://home-assistant.io/images/default-social.png">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant 中文网" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>
  <body >
    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
  <a href="/" class="site-title">
    <img width='40' src='/demo/favicon-192x192.png'>
    <span>Home Assistant 中文网</span>
  </a>
</div>
<div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-right">
  <li><a href="/getting-started/">快速开始</a></li>
  <li><a href="/components/">组件</a></li>
  <li><a href="/docs/">使用文档</a></li>
  <li><a href="/cookbook/">范例</a></li>
  <li><a href="/developers/">开发文档</a></li>
  <li><a href="/blog/">博客</a></li>
  <li><a href="/help/">需要帮助？</a></li>
  <li><a href="https://bbs.hassbian.com/forum.php?from=github">中文论坛</a></li>
  <li><a href="https://home-assistant.io">英文官网</a></li>
</ul>
  </nav>
  <div class='search-container' style='display: none'>
    <div class='search'>
      <i class="icon-search"></i>
      <input id='search' placeholder='Search the docs…'>
      <a href='#' class='close'><i class="icon-remove-sign"></i></a>
    </div>
  </div>
</div>
  </div>
</div>
    </header>
    <div class="grid-wrapper">
      <div class="grid grid-center">
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
          <article class="page">
    <div class='edit-github'><a href='https://github.com/home-assistant/home-assistant.github.io/tree/current/source/hassio/addon_publishing.markdown'>Edit this page on GitHub</a></div>
  <header>
    <h1 class="title indent">
      Publishing Your Add-on
    </h1>
  </header>
  <hr class="divider">
  <p>There are two different ways of publishing add-ons. One is to publish pre-build containers to Docker Hub and the other option is to have users build the containers locally on their Hass.io instance.</p>
<p><strong>Pre-build containers</strong><br />
With pre-build containers, the developer is responsible for building the images for each architecture on their machine and push the results out to Docker Hub. This has a lot of advantages for the user. As a user it will only have to download the final container and be up and running once the download finishes. This makes the installation process fast and almost no chance of failure. This is the preferred method.</p>
<p>We have automated the process of building and publishing add-ons. See below for the instructions.</p>
<p><strong>Locally build containers</strong><br />
Starting Hass.io 0.26, it is possible to distribute add-ons that will be built on the users machine. The advantage is that as a developer it is easy to test an idea and see if people are interested in your add-ons. This method includes installing and potentially compiling code. This means that installing such an add-on is slow and adds more wear and tear to users SD card/hard drive than the above mentioned pre-build solution. It also has a higher chance of failure if one of the dependencies of the container has changed or is no longer available.</p>
<p>Use this option when you are playing with add-ons and seeing if someone is interested in your work. Once you’re an established repository, please migrate to pushing builds to Docker Hub as it greatly improves the user experience. In the future we will mark locally built add-ons in the add-on store to warn users.</p>
<h2><a class="title-link" name="build-scripts-to-publish-add-ons-to-docker-hub" href="#build-scripts-to-publish-add-ons-to-docker-hub"></a> Build scripts to publish add-ons to Docker Hub</h2>
<p>All add-ons are simple docker containers. Inside your add-on <code class="highlighter-rouge">config.json</code> you specify the Docker image that will be installed for your add-on:</p>
<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">…</span><span class="w">

  </span><span class="nt">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myhub/image-{arch}-addon-name"</span><span class="p">,</span><span class="w">

  </span><span class="err">…</span><span class="w">
</span><span class="err">}</span><span class="w">
</span></code></pre>
</div>
<p>You can use <code class="highlighter-rouge"><span class="p">{</span><span class="err">arch</span><span class="p">}</span></code> inside the image name to support multiple architectures with 1 configuration file. It will be replaced with the architecture of the user when we load the image.</p>
<p>Hass.io assumes that the <code class="highlighter-rouge">master</code> branch of your add-on repository matches the latest tag on Docker Hub. When you’re building a new version, it’s suggested that you use another branch, ie <code class="highlighter-rouge">build</code>. After you push the add-on to <a href="https://hub.docker.com/">Docker Hub</a>, you can merge this branch to master.</p>
<h2><a class="title-link" name="custom-add-ons" href="#custom-add-ons"></a> Custom Add-ons</h2>
<p>You need a Docker Hub account to make your own add-ons. Download our <a href="https://github.com/home-assistant/hassio-build/tree/master/build-scripts/addons">build script</a> and run one of the following commands.</p>
<p>For a git repository:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Test only:</span>
./create_hassio_addon.sh -a amd64 -s addon-slug -r https://github.com/xy/addons -b branchname

<span class="c"># push to docker hub:</span>
./create_hassio_addon.sh -a amd64 -s addon-slug -r https://github.com/xy/addons -b branchname -p

<span class="c"># create for all supported arch:</span>
./create_addon_all.sh -s addon-slug -r https://github.com/xy/addons -b branchname -p
</code></pre>
</div>
<p>For a local repository:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Test only:</span>
./create_hassio_addon.sh -a amd64 -s addon-slug -l /home/xy/my_local_repo

<span class="c"># push to docker hub:</span>
./create_hassio_addon.sh -a amd64 -s addon-slug -l /home/xy/my_local_repo -p
</code></pre>
</div>
</article>
        </div>
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
    <section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title delta">Topics</h1>
    <ul class='divided sidebar-menu'>
      <li>
        <a  href='/hassio/'>Hass.io </a>
        <ul>
          <li><a  href='/hassio/installation/'>Installation </a></li>
          <li><a  href='/addons/'>Available add-ons </a></li>
          <li><a  href='/hassio/installing_third_party_addons/'>Installing third-party add-ons </a></li>
          <li><a  href='/hassio/external_storage/'>External storage </a></li>
          <li><a  href='/hassio/run_local/'>Execute local things </a></li>
          <li><a  href='/hassio/architecture/'>Architecture </a></li>
        </ul>
      </li>
    </ul>
    <ul class='divided sidebar-menu'>
      <li>
        <a  href='/hassio/addon_development/'>Add-on Development </a>
        <ul>
          <li><a  href='/hassio/addon_tutorial/'>Tutorial: Making your first add-on </a></li>
          <li><a  href='/hassio/addon_config/'>Configuration </a></li>
          <li><a  href='/hassio/addon_testing/'>Local Testing </a></li>
          <li><a class='active' href='/hassio/addon_publishing/'>Publishing </a></li>
          <li><a  href='/hassio/addon_repository/'>Repositories </a></li>
        </ul>
      </li>
      <li><a  href='/hassio/debugging/'>Debugging Hass.io </a></li>
    </ul>
  </div>
</section>
</div>
        </aside>
      </div>
    </div>
    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright">
  <a rel="me" href='https://twitter.com/home_assistant'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://facebook.com/homeassistantio'><i class="icon-facebook"></i></a>
  <a rel="me" href='https://plus.google.com/110560654828510104551'><i class="icon-google-plus"></i></a>
  <a rel="me" href='https://github.com/home-assistant/home-assistant'><i class="icon-github"></i></a>
  <div class="credit">
    Contact us at <a href='mailto:hello@home-assistant.io'>hello@home-assistant.io</a> (no support!).<br>
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and the <a href='https://github.com/coogie/oscailte'>Oscalite theme</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">home-assistant.io</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
</div>
    </div>
  </div>
</div>
    </footer>
    <script>
  var _gaq=[['_setAccount','UA-100550088-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>
  </body>
</html>
